#!/usr/bin/env node

/* jshint esversion: 6, node: true */

'use strict';

const commander = require('commander');
const fs = require('fs');
const path = require('path');

commander
  .version('0.1.0')
  .usage('[cmd] [options] [<args> ...]\r\x1b[F'); // Skip the extra new-line.

for (let fname of fs.readdirSync(__dirname)) {
  let cmd = require(path.join(__dirname, fname));
  let match = /verdon-(.*)/.exec(fname);
  if (match) {
    let name = match[1];
    let desc = cmd.description().split('\n')[0].toLowerCase();
    commander.command(name + ' ' + cmd.usage(), desc);
  }
}

commander.parse(process.argv);
