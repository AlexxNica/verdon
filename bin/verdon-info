#!/usr/bin/env node

/* jshint esversion: 6, node: true */

'use strict';

const verdon = require('../lib');
const commander = require('commander');

const cmd = new commander.Command()
  .arguments('<url> [<message>]')
  .description('remote service information')
  .option('-j, --json', 'output JSON')
  .action((url, msg, opts) => {
    verdon.createClient(url, (err, client) => {
      if (err) {
        console.error(err.message);
        process.exit(1);
      }
      var svc = client.getService();
      if (msg) {
        console.log(opts);
      } else {
        console.log(svc.getDocumentation());
      }
    });
  });

module.exports = verdon.runIfMain(cmd, module);
